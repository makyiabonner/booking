import Head from 'next/head'
import { Inter } from 'next/font/google'
import Image from 'next/image'
import styles from '@/styles/Home.module.scss'
import Nav from '@/components/Navbar/Navbar'
import Register from '@/components/Register/Register'
import { useState } from 'react'
import LandingSection from '@/components/HomePage/Landing/landing'
import HomeSection from '@/components/HomePage/HomeSection/HomeSection'
import { useEffect } from 'react'

const inter = Inter({ subsets: ['latin'] })
export default function Home() {
  const toggleActiveState = () => setIsActive(!isActive);
  const [isActive, setIsActive] = useState(false)
  const [offsetY, setOffsetY]= useState(null);
  const handleScroll = () => setOffsetY(window.pageYOffset);

  useEffect(() =>{
    window.addEventListener('scroll', handleScroll);

    return () => window.removeEventListener('scroll',handleScroll);
  },[]);

  const containerImgs = [
    {id:1, src: '/images/resort.webp', alt: 'RESORTS'},
    {id:2, src: '/images/apartment.webp', alt: 'APARTMENTS'},
    {id:3, src: '/images/hotel.webp', alt: 'HOTELS'}
  ]
  return (
    <>
      <Head>
        <title>Savvy</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Register isActive={isActive} toggleActiveState={toggleActiveState}/>
      <Nav isActive={isActive} toggleActiveState={toggleActiveState} />
      <main className={`${styles.main} ${inter.className}`}>
          <LandingSection/>
          <div className={styles.container}>
          <div className={`${styles.textSection} flex-column align-items-md-center gap-3 gap-md-0 flex-md-row`}>
            <h3 className={styles.containerSubtitle}>Seamless Reservations at Your<br></br> Fingertips</h3>
            <p className={styles.containerDesc}>No more time-consuming phone calls, now<br></br> you have the power to book services at<br></br> your convenience.</p>
          </div>
          <div className={`mt-5 flex-column flex-lg-row gap-5 align-items-sm-center align-items-md-center gap-lg-0 ${styles.containerImgs}`}>
                {containerImgs.map((img) => {
                      return (
                        <div>
                          <div 
                              className={styles.reservation_category} 
                              style={{backgroundImage:`url(${img.src})`, 
                                      transform:`translateY(${offsetY * -.03}px)` 
                                    }}
                            >
                            <div className={styles.imgDiv}>
                              <h1 style={{ transform:`translateY(${offsetY * -.03}px)` }}>{img.alt}</h1>
                            </div>
                          </div>
                        </div>
                        
                      )
                  }
                )}
          </div>
        </div>
        <HomeSection/>
      </main>
      <footer className={styles.footer}></footer>
    </>
  )
}
